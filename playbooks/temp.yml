---
- hosts: windows
  gather_facts: false
  tasks:
  - name:
    set_fact:
      dns_server_1: "{{ '127.0.0.1' if inventory_hostname in groups['domain_controller'] else hostvars[groups['domain_controller'][0]]['ansible_ssh_host']}}"

  - name: 
    debug: var=dns_server_1
